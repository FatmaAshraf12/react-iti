import{r as h,j as c,b as e,l as x,A as N,L as P}from"./index.ce6d0ad5.js";import{u as y}from"./useQuery.esm.dd230b97.js";const j=async({queryKey:r})=>{const[,t]=r;return t?(await fetch(`https://pets-v2.dev-apis.com/breeds?animal=${t}`)).json():""},E=r=>y(["breeds",r],j),F=async({queryKey:r})=>{const[,{animal:t,city:s,breed:i}]=r;return!t||!i?"":(await fetch(`https://pets-v2.dev-apis.com/pets?animal=${t}&city=${s}&breed=${i}`)).json()},w=r=>y(["pets",r],F);class C extends h.exports.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(t,s){this.setState({error:t,errorInfo:s})}render(){return this.state.hasError?(console.log(this.state),c("div",{children:[e("h2",{children:"Something went wrong."}),e("p",{children:this.state.error&&this.state.error.toString()})]})):this.props.children}}const D=r=>{const{name:t,animal:s,breed:i,images:o,location:n,id:l}=r;let d="https://pets-images.dev-apis.com/pets/none.jpg";return o.length&&(d=o[0]),c(x,{to:`/details/${l}`,className:"pet",children:[e("div",{className:"image-container",children:e("img",{src:d,alt:t})}),c("div",{className:"info",children:[e("h1",{children:t}),c("h2",{children:[s," \u2014 ",i," \u2014 ",n," \u2014 ",l]})]})]})},$=({pets:r})=>e("div",{className:"search",children:r.length?r.map(t=>e(D,{animal:t.animal,name:t.name,breed:t.breed,images:t.images,location:t.city,id:t.id},t.id)):e("h1",{children:"No Pets Found"})}),A=["dog","rabbit","bird"],k=()=>{var u,p,b,g;const[r]=h.exports.useContext(N),[t,s]=h.exports.useState({city:"",animal:"",breed:""}),i=E(t.animal);let o=(p=(u=i==null?void 0:i.data)==null?void 0:u.breeds)!=null?p:[];const n=w(t);let l=(g=(b=n==null?void 0:n.data)==null?void 0:b.pets)!=null?g:[];return c("div",{className:"search-params",children:[c("form",{action:"",onSubmit:a=>{a.preventDefault();const m=new FormData(a.currentTarget),v=m.get("animal"),S=m.get("city"),f=m.get("breed");!v&&!f?alert("please select values"):s({animal:v,city:S,breed:f})},children:[r&&e("div",{className:"pet image-container",children:e("img",{src:r.images[0],alt:r.name})}),e("label",{htmlFor:"city",children:"city"}),e("input",{type:"text",id:"city",name:"city",placeholder:"city"}),e("br",{}),e("label",{htmlFor:"animal",children:"Animal"}),c("select",{id:"animal",name:"animal",onChange:a=>{s({...t,animal:a.target.value,breed:""})},children:[e("option",{value:""},""),A.map(a=>e("option",{value:a,children:a},a))]}),e("br",{}),e("label",{htmlFor:"breed",children:"Bread"}),e("select",{id:"breed",disabled:!o.length,name:"breed",children:o.map(a=>e("option",{value:a,children:a},a))}),e("br",{}),e("button",{children:"Submit"})]}),n.isLoading&&e("div",{className:"search loader-container",children:e(P,{})}),n.isError&&e("span",{children:n.error.message}),n.data&&e(C,{children:e($,{pets:l})})]})};export{k as default};
